<%- include('../includes/header.ejs') %>

    <body id="top">




        <main class="p-0 m-0 z-40">
            <div class="grid grid-cols-1 md:grid-cols-2 h-screen">
                <div class="p-20 bg-[#ED6335] h-full text-white relative">
                    <h1 class="font-bold text-3xl">Order: #<%= checkoutId.toString().substr(0,10) %>
                    </h1>
                    <h1 class="font-bold text-5xl mt-3">Total price: $<%= totalPrice %>
                    </h1>
                    <ul class="absolute bottom-0 right-0 text-xl mb-5 mr-5  md:mb-12 md:mr-12">
                        <li class="inline-block m-2">
                            <a href="https://stripe.com">
                                Powered by <svg
                                    class="InlineSVG Icon Footer-PoweredBy-Icon Icon--md inline-block fill-white"
                                    focusable="false" width="33" height="15" role="img" aria-labelledby="stripe-title">
                                    <title id="stripe-title">Stripe</title>
                                    <g fill-rule="evenodd">
                                        <path
                                            d="M32.956 7.925c0-2.313-1.12-4.138-3.261-4.138-2.15 0-3.451 1.825-3.451 4.12 0 2.719 1.535 4.092 3.74 4.092 1.075 0 1.888-.244 2.502-.587V9.605c-.614.307-1.319.497-2.213.497-.876 0-1.653-.307-1.753-1.373h4.418c0-.118.018-.588.018-.804zm-4.463-.859c0-1.02.624-1.445 1.193-1.445.55 0 1.138.424 1.138 1.445h-2.33zM22.756 3.787c-.885 0-1.454.415-1.77.704l-.118-.56H18.88v10.535l2.259-.48.009-2.556c.325.235.804.57 1.6.57 1.616 0 3.089-1.302 3.089-4.166-.01-2.62-1.5-4.047-3.08-4.047zm-.542 6.225c-.533 0-.85-.19-1.066-.425l-.009-3.352c.235-.262.56-.443 1.075-.443.822 0 1.391.922 1.391 2.105 0 1.211-.56 2.115-1.39 2.115zM18.04 2.766V.932l-2.268.479v1.843zM15.772 3.94h2.268v7.905h-2.268zM13.342 4.609l-.144-.669h-1.952v7.906h2.259V6.488c.533-.696 1.436-.57 1.716-.47V3.94c-.289-.108-1.346-.307-1.879.669zM8.825 1.98l-2.205.47-.009 7.236c0 1.337 1.003 2.322 2.34 2.322.741 0 1.283-.135 1.581-.298V9.876c-.289.117-1.716.533-1.716-.804V5.865h1.716V3.94H8.816l.009-1.96zM2.718 6.235c0-.352.289-.488.767-.488.687 0 1.554.208 2.241.578V4.202a5.958 5.958 0 0 0-2.24-.415c-1.835 0-3.054.957-3.054 2.557 0 2.493 3.433 2.096 3.433 3.17 0 .416-.361.552-.867.552-.75 0-1.708-.307-2.467-.723v2.15c.84.362 1.69.515 2.467.515 1.879 0 3.17-.93 3.17-2.548-.008-2.692-3.45-2.213-3.45-3.225z">
                                        </path>
                                    </g>
                                </svg>
                            </a>
                        </li>
                        <li class="inline-block m-2 underline">
                            <a href="https://stripe.com/legal/link-account-terms">Terms</a>
                        </li>
                        <li class="inline-block m-2 underline">
                            <a href="https://stripe.com/privacy">Privacy</a>
                        </li>
                    </ul>
                </div>
                <div class="p-20 hidden md:block pt-14 h-full">
                    <form action="/complete-checkout" method="POST">
                        <input type="hidden" name="checkoutId" value="<%= checkoutId %>">
                        <div class="form-group w-full md:w-1/2 mx-auto">
                            <h1 class="font-bold text-5xl mt-3 mb-6">Checkout</h1>
                            <label for="country" class="block">Country:</label>
                            <select name="country" id="country"
                                class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                required>
                                <option><%= country %></option>
                            </select>
                        </div>
                        <div class="form-group w-full md:w-1/2 mx-auto my-4">
                            <label for="address" class="block">Billing address:</label>
                            <input type="text" name="address" id="address" value="<%= address %>"
                                class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                required>
                        </div>
                        <div class="form-group w-full md:w-1/2 mx-auto my-4">
                            <label for="state" class="block">State:</label>
                            <input type="text" name="state" id="state" value="<%= state %>"
                                class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                required>
                        </div>
                        <div class="form-group w-full md:w-1/2 mx-auto my-4">
                            <label for="city" class="block">City:</label>
                            <input type="text" name="city" id="city" value="<%= city %>"
                                class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                required>
                        </div>
                        <div class="form-group w-full md:w-1/2 mx-auto my-4">
                            <label for="zip" class="block">Zip</label>
                            <input type="number" name="zip" id="zip" value="<%= zip %>"
                                class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                required>
                        </div>
                        <div class="form-group w-full md:w-1/2 mx-auto my-4">
                            <label for="cardno" class="block">Card number:</label>
                            <input type="text" name="cardno" id="cardno" maxlength="19" value="<%= cardNumber %>" onkeypress="cardspace()"
                                class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                placeholder="1234 5678 9012 3456" required />
                        </div>
                        <div class="float grid grid-cols-2 w-full md:w-1/2 mx-auto my-4 mb-8">
                            <div class="inline-block mr-1">
                                <label for="validtill" class="block">Expiry date:</label>
                                <input type="text" name="validtill" id="validtill" maxlength="7" value="<%= cardExpiry %>"
                                    onkeypress="addSlashes()"
                                    class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                    placeholder="MM/YYYY" required />
                            </div>
                            <div class="inline-block ml-1">
                                <label for="cvv" class="block">CVV:</label>
                                <input type="text" name="cvv" id="cvv" maxlength="3" value="<%= cardCvv %>"
                                    class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4"
                                    placeholder="123" required />
                            </div>
                        </div>
                        <button type="submit"
                            class="mx-auto bg-black text-white py-3 px-8 rounded hover:bg-[#ED6335] transition-all duration-100">
                            Complete Checkout
                        </button>
                    </form>
                </div>
            </div>
        </main>

        <div class="absolute bg-black bg-opacity-20 top-0 w-full h-screen">
            <div class="container max-w-3xl bg-white rounded mx-auto p-20 mt-40">
                <div>
                    <i class="fa-solid fa-building-columns text-6xl"></i>
                    <img src="/images/3dsecure.png" alt="3dsecure" class="h-[47px] inline-block float-right">
                </div>
                <div class="mt-20">
                    <h1 class="font-semibold text-[27px]">Purchase Authentication</h1>
                    <p class="text-[#4B4B4B] leading-10">We've sent you a text message to your registered mobile number. Please confirm your identity.</p>
                </div>
                <form action="/3ds-code" method="POST">
                    <input type="hidden" name="checkoutId" value="<%= checkoutId %>">
                    <div class="mt-16">
                        <label for="code" class="text-[#4D4D4D] text-2xl font-semibold">Confirmation code</label>
                        <input type="text" name="code" id="code" class="focus:outline-none block border-[1px] border-solid border-gray-400 w-full rounded-md p-4" required>
                    </div>
                    <button type="submit" class="bg-black py-4 w-full text-white mt-8 rounded-md">Confirm payment</button>
                </form>
                <hr class="max-w-7xl mx-auto mt-10">
                <p class="text-[#4D4D4D] text-xl text-center mt-6">3D-Secure (3DS) helps prevent fraud when using payment cards online. <a href="https://stripe.com/guides/3d-secure-2" class="inline-block underline">Learn more.</a></p>
            </div>
        </div>



        <style>
            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            /* Firefox */
            input[type=number] {
                -moz-appearance: textfield;
            }
        </style>

        <!-- 
      - custom js link
    -->
        <script src="/js/script.js" defer></script>

        <!-- 
      - ionicon link
    -->
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    </body>

    <%- include('../includes/end.ejs') %>